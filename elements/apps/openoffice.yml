id: openoffice
version: 4.1.14
about: A free and open productivity suite

merge: [elements/include/appimage.inc]

build-depends:
- components/appimagetool.yml
sources:
- https://downloads.apache.org/openoffice/%{version}/binaries/en-US/Apache_OpenOffice_%{version}_Linux_x86-64_install-rpm_en-US.tar.gz
script: |
  for file in RPMS/*.rpm ; do
    echo "extracting ${file##*/}"
    bsdtar -xf ${file}
  done

  for file in RPMS/desktop-integration/*.rpm ; do
    echo "extracting ${file##*/}"
    bsdtar -xf ${file}
  done

  mkdir -p %{install-root}/
  mv opt/openoffice4/* %{install-root}

  install -D usr/share/icons/hicolor/128x128/apps/openoffice4-main.png %{install-root}/%{datadir}/icons/%{id}.png
  install -D usr/share/icons/hicolor/128x128/apps/openoffice4-main.png %{install-root}/%{datadir}/icons/openoffice4-startcenter.png
  install -D %{install-root}/share/xdg/startcenter.desktop %{install-root}/%{datadir}/applications/%{id}.desktop
