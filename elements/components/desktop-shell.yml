id: desktop-shell
version: 2.0.5
about: Desktop shell for rlxos

merge:
  - elements/include/theme.inc

depends:
  - components/swayfx.yml
  - components/swaybg.yml
  - components/swayidle.yml
  - components/swaylock.yml
  - components/cage.yml
  
  - components/greetd.yml
  - components/wlgreet.yml
  
  - components/i3blocks.yml
  - components/rofi.yml
  - components/bemenu.yml
  - components/foot.yml
  - components/brightnessctl.yml
  - components/pipewire.yml
  - components/pamixer.yml
  - components/mako.yml
  - components/playerctl.yml
  - components/iio-sway.yml
  - components/psmisc.yml
  - components/wvkbd.yml
  - components/wob.yml
  - components/grimshot.yml

  - components/fonts/ibm-plex.yml
  - components/fonts/noto.yml
  - components/fonts/noto-cjk.yml
  - components/fonts/noto-emoji.yml
  - components/fonts/adobe-source-code-pro-fonts.yml
  - components/fonts/ibm-plex-nerd-fonts.yml

  - components/themes/adwaita-icon-theme.yml
  - components/themes/qogir-icon-theme.yml
  - components/themes/qogir-gtk-theme.yml


script: |-
  install -v -D -m 0755 /dev/stdin %{install-root}%{libdir}/systemd/systemd-preset << "EOF"
  enable greetd
  EOF

  install -v -D -m 0644 /files/backgrounds/default.jpg %{install-root}%{datadir}/backgrounds/default.jpg
  install -v -D -m 0644 /files/backgrounds/default_blur.jpg %{install-root}%{datadir}/backgrounds/default_blur.jpg

  mkdir -p %{install-root}%{sysconfdir}/xdg/

  for dir in sway swaylock greetd wob; do
    cp -rf /files/$dir %{install-root}%{sysconfdir}/
  done

  mkdir -p %{install-root}%{datadir}/
  cp -rf /files/rofi %{install-root}%{datadir}/

  for script in Powermenu TabletMode ; do
    install -vDm 0755 /files/scripts/$script -t %{install-root}%{bindir}/
  done

  for dir in foot ; do
    cp -rf /files/$dir %{install-root}%{sysconfdir}/xdg/
  done

  install -vDm 0644 /files/i3blocks/i3blocks.conf -t %{install-root}%{sysconfdir}/
  for script in audio battery network ; do
    install -vDm 0755 /files/i3blocks/${script}.sh -t %{install-root}%{libdir}/i3blocks/
  done

  install -vDm 0644 /files/dialogrc -t %{install-root}%{sysconfdir}/

  install -vDm0644 /dev/stdin %{install-root}/%{datadir}/glib-2.0/schemas/10_rlxos-default-settings.gschema.override << "EOF"
  [org.gnome.desktop.interface]
  gtk-theme="Qogir-Light"
  icon-theme="Qogir"
  cursor-theme="Qogir"
  font-name="%{font_theme}"
  monospace-font-name="Source Code Pro 12"
  font-antialiasing = "rgba"
  EOF