id: libreoffice
version: 24.2.5.2
about: LibreOffice is a full-featured office suite

pre-script: |-
  sed -i '/icuuc \\/a zlib\\' writerperfect/Library_wpftdraw.mk

  sed -e "/gzip -f/d"   \
      -e "s|.1.gz|.1|g" \
      -i bin/distro-install-desktop-integration

  sed -e "/distro-install-file-lists/d" -i Makefile.in

  ./autogen.sh
  
  ./configure --prefix=%{prefix}  \
      --sysconfdir=%{sysconfdir}  \
      --with-vendor=RLXOS         \
      --with-myspell-dicts        \
      --with-lang=ALL             \
      --without-junit             \
      --without-system-dicts      \
      --disable-dconf             \
      --disable-odk               \
      --enable-release-build=yes  \
      --enable-python=system      \
      --with-jdk-home=%{libdir}/openjdk \
      --with-ant-home=%{libdir}/apache-ant \
      --with-system-boost         \
      --with-system-clucene       \
      --with-system-curl          \
      --with-system-epoxy         \
      --with-system-expat         \
      --with-system-glm           \
      --with-system-gpgmepp       \
      --with-system-graphite      \
      --with-system-harfbuzz      \
      --with-system-jpeg          \
      --with-system-lcms2         \
      --with-system-libatomic_ops \
      --with-system-libpng        \
      --with-system-nss           \
      --with-system-openldap      \
      --with-system-openssl       \
      --with-system-poppler       \
      --with-system-libtiff       \
      --with-system-libwebp       \
      --with-system-zlib
  
  make build

  make distro-pack-install DESTDIR=%{install-root}

depends:
  - components/libboost.yml
  - components/cairo.yml
  - components/clucene.yml
  - components/curl.yml
  - components/dbus.yml
  - components/desktop-file-utils.yml
  - components/expat.yml
  - components/fontconfig.yml
  - components/freetype.yml
  - components/libgcc.yml
  - components/gpgme.yml
  - components/graphite2.yml
  - components/harfbuzz.yml
  - components/hicolor-icon-theme.yml
  - components/hunspell.yml
  - components/lcms.yml
  - components/libatomic_ops.yml
  - components/cups.yml
  - components/libepoxy.yml
  - components/libldap.yml
  - components/libpng.yml
  - components/x11/libx11.yml
  - components/libxslt.yml
  - components/nspr.yml
  - components/nss.yml
  - components/shared-mime-info.yml
  - components/gtk.yml
  - components/glm.yml
  - components/gstreamer.yml
  - components/libwebp.yml

build-depends:
  - components/apache-ant.yml
  - components/llvm.yml

sources:
  - https://download.documentfoundation.org/libreoffice/src/%{version:3}/libreoffice-%{version}.tar.xz
