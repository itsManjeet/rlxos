id: make-ca
version: 1.13
about: MakeCA

depends:
  - components/p11-kit.yml
  - components/nss.yml
sources:
  - https://github.com/lfs-book/make-ca/releases/download/v%{version}/make-ca-%{version}.tar.xz

script: |-
  make install LIBEXECDIR=%{libdir} SBINDIR=%{bindir} DESTDIR=%{install-root}

  install -vDm 0754 /dev/stdin %{install-root}%{sysconfdir}/cron.weekly/update-pki.s << "EOF"
  #!/bin/bash
  %{bindir}/make-ca -g
  EOF

integration: |-
  make-ca -g