id: updates
version: 0.2.1
about: System updates server
commit: bf12d27ce537ef979dc0467ad0cb60ba80421f27
depends:
  - components/ostree.yml

build-depends:
  - components/rustc.yml

post-script: |-
  install -v -D -m 0755 -t %{install-root}/%{libdir}/dev.rlxos.updates target/release/%{id}
  install -v -D -m 0644 -t %{install-root}/%{datadir}/dbus-1/system.d/ data/dev.rlxos.updates.conf

  mkdir -p %{install-root}%{libdir}/systemd/system/
  sed 's@libexecdir@%{libdir}@g' data/system-updates.service.in > %{install-root}%{libdir}/systemd/system/system-updates.service



sources:
  - updates-%{commit}.tar.gz::https://github.com/itsManjeet/updates/archive/%{commit}.tar.gz
