id: mesa
version: 25.2.2
about: OpenGL compatible 3D graphics library

pre-script: |-
    python3 -m pip install ply pyyaml

configure: >-
    -D android-libbacktrace=disabled
    -D b_ndebug=true
    -D gallium-drivers=r300,r600,radeonsi,nouveau,virgl,svga,llvmpipe,softpipe,i915,iris,crocus,zink
    -D gallium-extra-hud=true
    -D gallium-mediafoundation=disabled
    -D gallium-rusticl=true
    -D gles1=disabled
    -D html-docs=disabled
    -D intel-rt=enabled
    -D libunwind=disabled
    -D microsoft-clc=disabled
    -D platforms=x11,wayland
    -D valgrind=enabled
    -D video-codecs=all
    -D vulkan-drivers=amd,gfxstream,intel,intel_hasvk,swrast,virtio,nouveau
    -D vulkan-layers=device-select,intel-nullhw,overlay,screenshot,vram-report-limit

depends:
    - components/libelf.yml
    - components/libxml2.yml
    - components/libllvm.yml
    - components/libdrm.yml
    - components/wayland.yml
    - components/lm-sensors.yml
    - components/libva-nomesa.yml
    - components/libvdpau.yml
    - components/libglvnd.yml
    - components/libunwind.yml
    - components/vulkan-loader.yml
    - components/x11/libx11.yml
    - components/x11/libxdamage.yml
    - components/x11/libxrandr.yml
    - components/x11/libxshmfence.yml
    - components/x11/libxxf86vm.yml
    - components/x11/libpciaccess.yml

build-depends:
    - components/wayland-protocols.yml
    - components/py/py-mako.yml
    - components/py/py-pip.yml
    - components/cmake.yml
    - components/flex.yml
    - components/bison.yml
    - components/glslang.yml
    - components/llvm.yml
    - components/libclc.yml
    - components/directx-headers.yml
    - components/rustc.yml
    - components/rust-bindgen.yml
    - components/cbindgen.yml
    - components/valgrind.yml
    - components/vulkan-headers.yml

sources:
    - https://mesa.freedesktop.org/archive/mesa-%{version}.tar.xz
