id: xfdesktop
version: 4.20.0
about: Xfce desktop manager
release: 8
build-type: meson
configure: >-
  -D desktop-menu=enabled
  -D thunarx=enabled
  -D x11=enabled
  -D wayland=enabled
  -D desktop-icons=true
  -D file-icons=true
  -D tests=false
  -D default-backdrop-filename="%{datadir}/backgrounds/default.jpg"


post-script: |-
  install -vm 0644 $RLXOS_FILES/backgrounds/*.jpg -t %{install-root}%{datadir}/backgrounds/
  install -vDm 0644 /dev/stdin %{install-root}/%{sysconfdir}/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-desktop.xml << "EOF"
  <?xml version="1.0" encoding="UTF-8"?>
  <channel name="xfce4-desktop" version="1.0">
    <property name="desktop-icons" type="empty">
      <property name="icon-size" type="uint" value="64"/>
      <property name="gravity" type="int" value="1"/>
      <property name="file-icons" type="empty">
        <property name="show-filesystem" type="bool" value="false"/>
      </property>
    </property>
    <property name="desktop-menu" type="empty">
      <property name="show" type="bool" value="false"/>
    </property>
  </channel>
  EOF
depends:
  - components/libwnck.yml
  - components/libnotify.yml
  - components/startup-notification.yml
  - components/xfce4/thunar.yml
  - components/xfce4/exo.yml
  - components/xfce4/garcon.yml
  - components/gtk-layer-shell.yml
  - components/xfce4/libxfce4windowing.yml
sources:
  - https://archive.xfce.org/src/xfce/xfdesktop/%{version:2}/xfdesktop-%{version}.tar.bz2
