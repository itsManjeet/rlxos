id: containerd
version: 1.5.2
about: |
  An open and reliable container runtime

depends:
  runtime:
    - runc
    - btrfs-progs
    - libseccomp
  
  buildtime:
    - go
    - git

sources:
  - http://jaeger.morpheus.net/linux/crux/files/containerd-1.5.2.tar.xz

packages:
  - id: pkg
    dir: .
    environ:
      - GO111MODULE=auto
      - GOPATH=${pkgupd_srcdir}
    
    plugin: script
    script: |
      mkdir -p src/github.com/containerd
      pushd src/github.com/containerd
      ln -s ${pkgupd_srcdir}/containerd-1.5.2 containerd
      
      cd containerd
      make GIT_COMMIT=36cc874494a56a253cd181a1a685b44b58a2e34a

      install -v -D -m 0755 bin/* -t ${pkgupd_pkgdir}/usr/bin/
