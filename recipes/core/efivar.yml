id: efivar
version: 37
about: |
  Package provides tools and libraries to manipulate EFI variables

sources:
  - https://github.com/rhboot/efivar/releases/download/37/efivar-37.tar.bz2
  - https://www.linuxfromscratch.org/patches/blfs/svn/efivar-37-gcc_9-1.patch

packages:
  - id: pkg
    dir: efivar-37
    prescript: |
      patch -Np1 -i ../efivar-37-gcc_9-1.patch

    plugin: script
    script: |
      make CFLAGS="-O2 -Wno-stringop-truncation" \
        libdir=/usr/lib \
        bindir=/usr/bin \
        mandir=/usr/share/man \
        includedir=/usr/include 

      make install DESTDIR=${pkgupd_pkgdir} \
        libdir=/usr/lib \
        bindir=/usr/bin \
        mandir=/usr/share/man \
        includedir=/usr/include -j1 V=1