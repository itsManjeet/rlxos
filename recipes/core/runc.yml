id: runc
version: 1.0.0-rc95
about: |
  A lightweight universal runtime container

depends:
  runtime:
    - libseccomp
  buildtime:
    - go
    - git

sources:
  - https://github.com/opencontainers/runc/archive/v1.0.0-rc95/runc-1.0.0-rc95.tar.gz
  - http://jaeger.morpheus.net/linux/crux/files/runc-man-pages-1.0.0-rc95.tar.xz

packages:
  - id: pkg
    dir: .
    plugin: script
    script: |
      mkdir -p src/github.com/opencontainers
      cd src/github.com/opencontainers
      ln -sf ${pkgupd_srcdir}/runc-1.0.0-rc95 runc
      cd runc
      export GOPATH=${pkgupd_srcdir}
      export BUILDTAGS="seccomp"
      make COMMIT=b9ee9c6314599f1b4a7f497e1f1f856fe433d3b7

      install -D -m 0755 runc ${pkgupd_pkgdir}/usr/bin/runc
      install -d -m 0755 ${pkgupd_pkgdir}/usr/share/man/man8
      install -m 0644 ${pkgupd_srcdir}/man8/* ${pkgupd_pkgdir}/usr/share/man/man8/