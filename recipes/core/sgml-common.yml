id: sgml-common
version: 0.6.3
about: |
  Package for creating and maintaining centralized SGML catalogs

sources:
  - https://sourceware.org/ftp/docbook-tools/new-trials/SOURCES/sgml-common-0.6.3.tgz
  - https://www.linuxfromscratch.org/patches/blfs/svn/sgml-common-0.6.3-manpage-1.patch

packages:
  - id: pkg
    dir: sgml-common-0.6.3
    plugin: script
    prescript: |
      patch -Np1 -i ../sgml-common-0.6.3-manpage-1.patch
      autoreconf -f -i

    script: |
      ./configure --prefix=/usr --sysconfdir=/etc
      make
      make install docdir=/usr/share/doc DESTDIR=${pkgupd_pkgdir}
    
    postscript: |
      mkdir -p ${pkgupd_pkgdir}/usr/share/sgml/sgml-iso-entities-8879.1986/
      install-catalog --add /etc/sgml/sgml-ent.cat \
        ${pkgupd_pkgdir}/usr/share/sgml/sgml-iso-entities-8879.1986/catalog
      
      mkdir -p ${pkgupd_pkgdir}/etc/sgml/
      install-catalog --add /etc/sgml/sgml-docbook.cat \
        ${pkgupd_pkgdir}/etc/sgml/sgml-ent.cat