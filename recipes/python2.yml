id: python2
version: 2.7.18
about: |
  Python2 development environment

depends:  
  runtime:
    - bzip2
    - expat
    - gdbm
    - libffi
    - openssl
    - zlib

sources:
  - https://www.python.org/ftp/python/2.7.18/Python-2.7.18.tar.xz
  - https://www.linuxfromscratch.org/patches/blfs/svn/Python-2.7.18-security_fixes-1.patch

packages:
  - id: pkg
    dir: Python-2.7.18
    prescript: |
      sed -i "/2to3/d" ./setup.py
      patch -Np1 -i ../Python-2.7.18-security_fixes-1.patch
      
    flags:
      - id: configure
        value: >
          --enable-shared
          --with-system-expat
          --with-system-ffi
          --without-ensurepip
          --enable-optimization
          --with-lto
          --with-tzpath=/usr/share/zoneinfo
          --enable-loadable-sqlite-extensions
    postscript: |
      rm ${pkgupd_pkgdir}/usr/bin/python